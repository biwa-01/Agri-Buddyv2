@import "tailwindcss";

@theme {
  --font-sans: var(--font-noto), ui-sans-serif, system-ui, sans-serif;
  --font-display: var(--font-noto-serif), ui-serif, Georgia, serif;
}

/* ── Force light mode: no auto-detection ── */
html {
  color-scheme: light;
}

@media (prefers-color-scheme: dark) {
  html { color-scheme: light; }
}

/* ── Mic button pulse ── */
@keyframes biwa-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.85; }
}
.biwa-pulse { animation: biwa-pulse 2.5s ease-in-out infinite; will-change: transform, opacity; }

/* ── Listening ring ── */
@keyframes listening-ring {
  0% { transform: scale(1); opacity: 0.6; }
  100% { transform: scale(1.8); opacity: 0; }
}
.listening-ring {
  animation: listening-ring 1.2s ease-out infinite;
}

/* ── Fade up ── */
@keyframes fade-up {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}
.fade-up { animation: fade-up 0.5s ease-out forwards; }

/* ── Thinking dots ── */
@keyframes dot-bounce {
  0%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-6px); }
}
.dot-1 { animation: dot-bounce 1.2s ease-in-out infinite; }
.dot-2 { animation: dot-bounce 1.2s ease-in-out 0.2s infinite; }
.dot-3 { animation: dot-bounce 1.2s ease-in-out 0.4s infinite; }

/* ── Hide scrollbar for history ── */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* ── Offline indicator pulse ── */
@keyframes offline-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
.offline-pulse { animation: offline-pulse 2s ease-in-out infinite; }

/* ── Chip pop-in ── */
@keyframes chip-pop {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}
.chip-pop { animation: chip-pop 0.25s ease-out forwards; }

/* ── Soundwave / Breathing animation ── */
@keyframes soundwave {
  0%, 100% { transform: scaleY(0.3); }
  50% { transform: scaleY(1); }
}
.soundwave-bar {
  display: inline-block;
  width: 4px;
  height: 32px;
  margin: 0 3px;
  border-radius: 2px;
  background: currentColor;
  animation: soundwave 1.2s ease-in-out infinite;
}
.soundwave-bar:nth-child(1) { animation-delay: 0s; }
.soundwave-bar:nth-child(2) { animation-delay: 0.15s; }
.soundwave-bar:nth-child(3) { animation-delay: 0.3s; }
.soundwave-bar:nth-child(4) { animation-delay: 0.45s; }
.soundwave-bar:nth-child(5) { animation-delay: 0.6s; }

/* ── Confirm card slide-in ── */
@keyframes slide-in {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}
.slide-in { animation: slide-in 0.3s ease-out forwards; }

/* ── Button press feedback ── */
.btn-press {
  transition: transform 0.1s ease, filter 0.1s ease;
}
.btn-press:active {
  transform: scale(0.95);
  filter: brightness(0.9);
}

/* ── Mic float-in (History View floating button) ── */
@keyframes mic-float-in {
  from { opacity: 0; transform: scale(0.5) translateY(20px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}
.mic-float-in { animation: mic-float-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }

/* ── Celebration pop (save confirmation) ── */
@keyframes celebration-pop {
  0% { opacity: 0; transform: scale(0.5); }
  60% { opacity: 1; transform: scale(1.1); }
  100% { opacity: 1; transform: scale(1); }
}
.celebration-pop { animation: celebration-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }

/* ── Confetti fall ── */
@keyframes confetti-fall {
  0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}
.confetti-piece {
  position: fixed;
  width: 10px;
  height: 10px;
  top: -10px;
  z-index: 51;
  border-radius: 2px;
  animation: confetti-fall 2.2s ease-in forwards;
}
.confetti-piece:nth-child(1) { left: 10%; background: #FF8C00; animation-delay: 0s; }
.confetti-piece:nth-child(2) { left: 25%; background: #22C55E; animation-delay: 0.2s; width: 8px; height: 12px; }
.confetti-piece:nth-child(3) { left: 40%; background: #F59E0B; animation-delay: 0.4s; }
.confetti-piece:nth-child(4) { left: 55%; background: #EF4444; animation-delay: 0.1s; width: 12px; height: 8px; }
.confetti-piece:nth-child(5) { left: 70%; background: #3B82F6; animation-delay: 0.3s; }
.confetti-piece:nth-child(6) { left: 85%; background: #A855F7; animation-delay: 0.5s; width: 8px; height: 12px; }
.confetti-piece:nth-child(7) { left: 15%; background: #EC4899; animation-delay: 0.6s; }
.confetti-piece:nth-child(8) { left: 60%; background: #14B8A6; animation-delay: 0.35s; width: 12px; height: 8px; }
.confetti-piece:nth-child(9) { left: 5%; background: #F97316; animation-delay: 0.15s; width: 7px; height: 11px; }
.confetti-piece:nth-child(10) { left: 20%; background: #10B981; animation-delay: 0.45s; }
.confetti-piece:nth-child(11) { left: 33%; background: #8B5CF6; animation-delay: 0.25s; width: 12px; height: 8px; }
.confetti-piece:nth-child(12) { left: 48%; background: #F43F5E; animation-delay: 0.55s; width: 8px; height: 12px; }
.confetti-piece:nth-child(13) { left: 63%; background: #06B6D4; animation-delay: 0.1s; }
.confetti-piece:nth-child(14) { left: 78%; background: #FBBF24; animation-delay: 0.4s; width: 11px; height: 7px; }
.confetti-piece:nth-child(15) { left: 92%; background: #34D399; animation-delay: 0.65s; width: 8px; height: 12px; }

/* ── View enter (tab switch) ── */
@keyframes view-enter {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
.view-enter { animation: view-enter 0.3s ease-out forwards; }

/* ── Tab indicator slide ── */
@keyframes tab-indicator {
  from { transform: scaleX(0); }
  to { transform: scaleX(1); }
}
.tab-indicator { animation: tab-indicator 0.25s ease-out forwards; }

/* ── Scroll hint bounce ── */
@keyframes scroll-hint-bounce {
  0%, 100% { transform: translateY(0); opacity: 0.6; }
  50% { transform: translateY(4px); opacity: 1; }
}
.scroll-hint-bounce { animation: scroll-hint-bounce 2s ease-in-out infinite; }

/* ── Filter slide-down (location sub-chips) ── */
@keyframes filter-slide-down {
  from { max-height: 0; opacity: 0; }
  to { max-height: 200px; opacity: 1; }
}
.filter-slide-down { animation: filter-slide-down 0.25s ease-out forwards; overflow: hidden; }

/* ── Empathy card warm glow ── */
@keyframes empathy-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.15); }
  50% { box-shadow: 0 0 30px rgba(245, 158, 11, 0.3); }
}
.empathy-glow { animation: empathy-glow 3s ease-in-out infinite; }
